#!/usr/bin/env bash
set -euo pipefail

DOTFILES_DIR="$(cd "$(dirname "$0")" && pwd)"
cd "$DOTFILES_DIR"

# Install stow if missing
command -v stow >/dev/null || brew install stow

# Stow packages
PACKAGES=(zsh git tmux nvim bat atuin zed gnupg)
for pkg in "${PACKAGES[@]}"; do
  echo "ðŸ“¦ Stowing $pkg..."
  stow -R --target="$HOME" "$pkg"
done

# Manual symlinks
ln -sfn "$DOTFILES_DIR/docker" "$HOME/docker"
ln -sfn "$HOME/Library/Mobile Documents/com~apple~CloudDocs" "$HOME/icloud"

echo "âœ… All done!"
